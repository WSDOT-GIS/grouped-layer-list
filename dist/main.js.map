{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../grouped-layer-list/dist/main.js","webpack:///../grouped-layer-list/node_modules/tslib/tslib.es6.js","webpack:///external \"esri/config\"","webpack:///external \"esri/arcgis/utils\"","webpack:///external \"esri/dijit/HomeButton\"","webpack:///external \"esri/geometry/Extent\"","webpack:///external \"esri/arcgis/Portal\"","webpack:///external \"esri/dijit/LayerList\"","webpack:///../grouped-layer-list/dist/metadataUtils.js","webpack:///../grouped-layer-list/node_modules/@wsdot/layer-metadata-soe-client/index.js","webpack:///../grouped-layer-list/dist/searchUtils.js","webpack:///external \"esri/geometry/webMercatorUtils\"","webpack:///../grouped-layer-list/dist/LayerSettings.js","webpack:///../grouped-layer-list/dist/reUtils.js","webpack:///./src/FormatError.ts","webpack:///./src/GithubLink.ts","webpack:///./src/WebmapSelector.ts","webpack:///./src/main.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","tslib_1","LayerList_1","__importDefault","metadataUtils_1","addGroupHeadings","srcNode","groups","previousGroupName","listItems","document","getElementById","querySelectorAll","mapping","Map","_loop_2","groupName","forEach","ln","set","createTitleToGroupMapping","groupNo","classToGroupNameMapping","li","label","querySelector","title","textContent","className","classList","add","Array","from","_a","_b","__read","join","__exportStar","getGroupsFromCreateMapItem","itemInfo","itemData","applicationProperties","viewing","layerGrouping","enabled","convertLayer","opLayer","id","visibility","layer","layerObject","showLegend","showOpacitySlider","showSubLayers","layerInfos","length","GroupedLayerList","_super","options","_this","this","originLayers","layers","sortedLayers_1","apply","__spread","titleGroups","propertyName","throwOnValueNotFound","e_1","_c","_i","titles","_loop_1","titles_1","titles_1_1","e_1_1","__generator","_d","push","msg","find","ReferenceError","console","warn","sent","trys","__values","next","done","error","return","enumerateLayersInGroupOrder","groupProperty","throwOnGroupNotFound","filter","includes","reverse","on","evt","cssText","styleNode","createElement","head","appendChild","metadata","addMetadataTabs","metadataFormatterPage","undefined","__extends","default","__webpack_exports__","__assign","__rest","__decorate","__param","__metadata","__awaiter","__await","__asyncGenerator","__asyncDelegator","__asyncValues","__makeTemplateObject","__importStar","extendStatics","b","setPrototypeOf","__proto__","__","constructor","assign","arguments","e","indexOf","getOwnPropertySymbols","decorators","target","desc","getOwnPropertyDescriptor","Reflect","decorate","paramIndex","decorator","metadataKey","metadataValue","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","result","then","body","f","y","g","_","ops","verb","throw","iterator","v","op","TypeError","pop","ar","concat","asyncIterator","q","a","resume","fulfill","settle","shift","cooked","raw","mod","k","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__4__","__WEBPACK_EXTERNAL_MODULE__5__","__WEBPACK_EXTERNAL_MODULE__6__","__WEBPACK_EXTERNAL_MODULE__7__","layer_metadata_soe_client_1","defaultFormatterPage","wrapUrlWithFormatterPage","metadataUrl","formatterPageUrl","encodeURIComponent","layerList","cb","addEventListener","ev","dataset","layerIndex","tabContainer","parseInt","parentElement","nextElementSibling","err","operationalLayer","url","mdLinks","listItem","tab","tabList","tabs","ul","name_1","mdUrl","detectLayerMetadataSupport","getMetadataLinks","tabIndex","tabId","toString","setAttribute","firstElementChild","children","href","addMetadataTab","once","passive","validLayersUrl","layerSourcesUrl","ArcGisError","errorInfo","message","code","Error","getServiceInfo","serviceUrl","serviceInfo","fetch","json","getLayerSources","supportedExtensions","test","layerSources","requestUrl","output","getValidLayers","obj","layerIds","JSON","stringify","webMercatorUtils_1","LayerSettings_1","setOperationalLayers","search","window","URLSearchParams","opLayers","opLayers_1","opLayers_1_1","has","val","layerSettings","LayerSettings","parse","createLayerLink","URL","history","div","location","replace","map","extent","searchValue","webMercatorToGeographic","xmin","ymin","xmax","ymax","Math","round","searchParams","remove","toggleEvent","visible","subLayerIndex","oldSettingStr","oldSettings","hadSublayersDefined","visibleLayers","onclick","unsupportedMessage","clipboard","navigator","writeText","clipErr","alert","root","__WEBPACK_EXTERNAL_MODULE__11__","reUtils_1","str","trueRe","makeBooleanRe","falseRe","split","refreshAbleLayer","suspend","setVisibility","setVisibleLayers","trueStrings","falseStrings","makeReGroup","strings","exclusive","pattern","RegExp","matchOnly","FormatError","[object Object]","expectedFormat","super","createSourceLink","re","match","owner","project","ghPagesToGithubUrl","rel","span","wsdotAgolOrgId","config_default","defaults","io","httpsDomains","corsEnabledServers","mapInput","queryPomise","portal","Portal_default","Portal","queryResults","queryItems","num","results","getWebMaps","form","action","input","type","required","placeholder","source","datalist","button","pi","option","customEvent","CustomEvent","detail","dispatchEvent","createWebmapIdForm","mapId","getMapIDFromUrl","utils_default","createMap","mapOptions","extStr","parseFloat","Extent_default","spatialReference","wkid","getExtentFromUrl","errors","mapButtonDiv","HomeButton_default","startup","groupings","main","group","groupEnd","operationalLayers","main_default","sourceLink","catch"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","\"use strict\";\r\n/**\r\n * Exposes GroupLayerList class and related functions.\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar LayerList_1 = tslib_1.__importDefault(require(\"esri/dijit/LayerList\"));\r\nvar metadataUtils_1 = require(\"./metadataUtils\");\r\ntslib_1.__exportStar(require(\"./searchUtils\"), exports);\r\n/**\r\n * Gets layer group definition (if present) from a web map.\r\n * @param itemInfo\r\n */\r\nfunction getGroupsFromCreateMapItem(itemInfo) {\r\n    if (itemInfo.itemData.applicationProperties) {\r\n        var applicationProperties = itemInfo.itemData.applicationProperties;\r\n        if (applicationProperties.viewing) {\r\n            var viewing = applicationProperties.viewing;\r\n            if (viewing.layerGrouping) {\r\n                var layerGrouping = viewing.layerGrouping;\r\n                if (layerGrouping && layerGrouping.enabled && layerGrouping.groups) {\r\n                    return layerGrouping.groups;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return null;\r\n}\r\nexports.getGroupsFromCreateMapItem = getGroupsFromCreateMapItem;\r\n/**\r\n * Converts the operational layer format returned from arcgis/utils.createMap to the\r\n * operation layer format expected by the LayerList constructor.\r\n * @param opLayer Operational layer object from arcgis/utils.createMap complete event.\r\n * @returns Operational layer for use with the LayerList constructor.\r\n */\r\nfunction convertLayer(opLayer) {\r\n    var id = opLayer.id, title = opLayer.title, visibility = opLayer.visibility;\r\n    var showLegend = true;\r\n    var showOpacitySlider = true;\r\n    var layer = opLayer.layerObject;\r\n    // Don't show sublayers tab if there is only one sublayer. Otherwise, show it.\r\n    var showSubLayers = layer.layerInfos\r\n        ? layer.layerInfos.length > 1\r\n        : true;\r\n    return {\r\n        id: id,\r\n        title: title,\r\n        layer: layer,\r\n        visibility: visibility,\r\n        showLegend: showLegend,\r\n        showOpacitySlider: showOpacitySlider,\r\n        showSubLayers: showSubLayers\r\n    };\r\n}\r\nexports.convertLayer = convertLayer;\r\n/**\r\n * Enumerate through the layers in the order presented in the grouping object.\r\n * @param titleGroups Grouping of layers\r\n * @param layers Array of layers\r\n * @param propertyName The name of the property. (Defaults to \"id\")\r\n * @param throwOnValueNotFound Set to true to throw a ReferenceError if a\r\n * group has a value that has no matching layer. If set to false, the invalid\r\n * value will simply be ignored.\r\n * @throws ReferenceError thrown if titleGroups contains a value that has no\r\n * corresponding layer when throwOnValueNotFound is true.\r\n * @yields {LayerListOperationalLayer}\r\n */\r\nfunction enumerateLayersInGroupOrder(titleGroups, layers, propertyName, throwOnValueNotFound) {\r\n    var e_1, _a, _b, _c, _i, groupName, titles, _loop_1, titles_1, titles_1_1, title, e_1_1;\r\n    if (propertyName === void 0) { propertyName = \"id\"; }\r\n    return tslib_1.__generator(this, function (_d) {\r\n        switch (_d.label) {\r\n            case 0:\r\n                _b = [];\r\n                for (_c in titleGroups)\r\n                    _b.push(_c);\r\n                _i = 0;\r\n                _d.label = 1;\r\n            case 1:\r\n                if (!(_i < _b.length)) return [3 /*break*/, 10];\r\n                groupName = _b[_i];\r\n                if (!titleGroups.hasOwnProperty(groupName)) return [3 /*break*/, 9];\r\n                titles = titleGroups[groupName];\r\n                _loop_1 = function (title) {\r\n                    var layer, msg;\r\n                    return tslib_1.__generator(this, function (_a) {\r\n                        switch (_a.label) {\r\n                            case 0:\r\n                                layer = layers.find(function (l) { return l[propertyName] === title; });\r\n                                if (!layer) {\r\n                                    msg = \"No layer found with \\\"\" + propertyName + \"\\\" of \\\"\" + title + \"\\\".\";\r\n                                    if (throwOnValueNotFound) {\r\n                                        throw new ReferenceError(msg);\r\n                                    }\r\n                                    else {\r\n                                        console.warn(msg);\r\n                                        return [2 /*return*/, \"continue\"];\r\n                                    }\r\n                                }\r\n                                return [4 /*yield*/, layer];\r\n                            case 1:\r\n                                _a.sent();\r\n                                return [2 /*return*/];\r\n                        }\r\n                    });\r\n                };\r\n                _d.label = 2;\r\n            case 2:\r\n                _d.trys.push([2, 7, 8, 9]);\r\n                titles_1 = tslib_1.__values(titles), titles_1_1 = titles_1.next();\r\n                _d.label = 3;\r\n            case 3:\r\n                if (!!titles_1_1.done) return [3 /*break*/, 6];\r\n                title = titles_1_1.value;\r\n                return [5 /*yield**/, _loop_1(title)];\r\n            case 4:\r\n                _d.sent();\r\n                _d.label = 5;\r\n            case 5:\r\n                titles_1_1 = titles_1.next();\r\n                return [3 /*break*/, 3];\r\n            case 6: return [3 /*break*/, 9];\r\n            case 7:\r\n                e_1_1 = _d.sent();\r\n                e_1 = { error: e_1_1 };\r\n                return [3 /*break*/, 9];\r\n            case 8:\r\n                try {\r\n                    if (titles_1_1 && !titles_1_1.done && (_a = titles_1.return)) _a.call(titles_1);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n                return [7 /*endfinally*/];\r\n            case 9:\r\n                _i++;\r\n                return [3 /*break*/, 1];\r\n            case 10: return [2 /*return*/];\r\n        }\r\n    });\r\n}\r\n/**\r\n * Creates a mapping of layer titles to group names.\r\n * @param groups group definition object.\r\n */\r\nfunction createTitleToGroupMapping(groups) {\r\n    var mapping = new Map();\r\n    var _loop_2 = function (groupName) {\r\n        if (groups.hasOwnProperty(groupName)) {\r\n            var layerNames = groups[groupName];\r\n            layerNames.forEach(function (ln) { return mapping.set(ln, groupName); });\r\n        }\r\n    };\r\n    for (var groupName in groups) {\r\n        _loop_2(groupName);\r\n    }\r\n    return mapping;\r\n}\r\n/**\r\n * Adds group headings above the list item corresponding to the first layer\r\n * in a group.\r\n * @param srcNode the srcNode of a LayerList\r\n * @param groups Defines which layers are in which group.\r\n * @returns CSS text to be added to a style element to be added to the page head.\r\n */\r\nfunction addGroupHeadings(srcNode, groups) {\r\n    // srcNode can be defined as either a node's \"id\" or the node itself.\r\n    // Get the HTMLElement.\r\n    var rootNode = typeof srcNode === \"string\"\r\n        ? document.getElementById(srcNode)\r\n        : srcNode;\r\n    // Get all of the <li> elements that correspond to map layers.\r\n    var listItems = rootNode.querySelectorAll(\".esriList > li\");\r\n    // Create layer title-to-group mapping.\r\n    var mapping = createTitleToGroupMapping(groups);\r\n    // Initialize variable to hold previous group name from previous loop iteration.\r\n    var previousGroupName;\r\n    // Define a common css class for all list items that begin a group.\r\n    var groupStartClass = \"layer-list-group-start\";\r\n    // Initialize group counter\r\n    var groupNo = 0;\r\n    // Initialize CSS class name to group name mapping.\r\n    var classToGroupNameMapping = new Map();\r\n    // Assign CSS classes to the <li>s corresponding to the first layer in a group.\r\n    // For each such item, add item to the class-to-group mapping.\r\n    listItems.forEach(function (li) {\r\n        var label = li.querySelector(\"label\");\r\n        if (label) {\r\n            var title = label.textContent;\r\n            var groupName = mapping.get(title) || \"Other\";\r\n            if (groupName !== previousGroupName) {\r\n                var className = \"layer-list-group-\" + groupNo;\r\n                classToGroupNameMapping.set(className, groupName);\r\n                li.classList.add(groupStartClass, className);\r\n                groupNo++;\r\n            }\r\n            previousGroupName = groupName;\r\n        }\r\n    });\r\n    // Create the CSS definition.\r\n    var cssText = Array.from(classToGroupNameMapping, function (_a) {\r\n        var _b = tslib_1.__read(_a, 2), className = _b[0], groupName = _b[1];\r\n        return \".\" + className + \":before { content: '\" + groupName + \"' }\";\r\n    });\r\n    return cssText.join(\"\\n\");\r\n}\r\n/**\r\n * An extension of esri/dijit/LayerList that supports grouping.\r\n */\r\nvar GroupedLayerList = /** @class */ (function (_super) {\r\n    tslib_1.__extends(GroupedLayerList, _super);\r\n    function GroupedLayerList(options, srcNode) {\r\n        var _this = this;\r\n        // If options.groups is defined, sort the layers to match group definition\r\n        if (options.groups) {\r\n            var originLayers = options.layers;\r\n            var sortedLayers_1 = new (Array.bind.apply(Array, tslib_1.__spread([void 0], enumerateLayersInGroupOrder(options.groups, options.layers, options.groupProperty, options.throwOnGroupNotFound))))();\r\n            // Append any layers that are not listed in the grouping object.\r\n            originLayers\r\n                .filter(function (l) { return !sortedLayers_1.includes(l); })\r\n                .forEach(function (l) { return sortedLayers_1.push(l); });\r\n            // Change the layers' order to match the group object.\r\n            options.layers = sortedLayers_1.reverse();\r\n        }\r\n        _this = _super.call(this, options, srcNode) || this;\r\n        if (options.groups) {\r\n            _this.on(\"load\", function (evt) {\r\n                // Add group headers to the first layer's <li> using CSS :before pseudo-element.\r\n                var cssText = addGroupHeadings(srcNode, options.groups);\r\n                var styleNode = document.createElement(\"style\");\r\n                styleNode.textContent = cssText;\r\n                document.head.appendChild(styleNode);\r\n            });\r\n        }\r\n        if (options.metadata) {\r\n            metadataUtils_1.addMetadataTabs(_this, options.metadataFormatterPage || undefined);\r\n        }\r\n        return _this;\r\n    }\r\n    return GroupedLayerList;\r\n}(LayerList_1.default));\r\nexports.default = GroupedLayerList;\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar layer_metadata_soe_client_1 = require(\"@wsdot/layer-metadata-soe-client\");\r\nvar defaultFormatterPage = \"https://wsdot-gis.github.io/geospatial-metadata\";\r\n/**\r\n * Creates a URL for a page that formats a metadata URL's XML into HTML.\r\n * @param metadataUrl Metadata URL.\r\n * @param formatterPageUrl Formatter page URL.\r\n */\r\nfunction wrapUrlWithFormatterPage(metadataUrl, formatterPageUrl) {\r\n    if (formatterPageUrl === void 0) { formatterPageUrl = defaultFormatterPage; }\r\n    if (!formatterPageUrl) {\r\n        return metadataUrl;\r\n    }\r\n    var xmlUrl = metadataUrl + \"?f=xml\";\r\n    var formatterSearch = \"url=\" + encodeURIComponent(xmlUrl);\r\n    var outUrl = formatterPageUrl + \"?\" + formatterSearch;\r\n    return outUrl;\r\n}\r\n/**\r\n * Adds a \"load\" event handler to a layer list. When the layer list has loaded,\r\n * A metadata tab will be added to each layers list item after its checkbox is\r\n * clicked for the first time.\r\n *\r\n * **Must be called before LayerList.startup()!**\r\n * @param layerList Layer List dijit\r\n * @param formatterPageUrl URL of formatter page.\r\n */\r\nfunction addMetadataTabs(layerList, formatterPageUrl) {\r\n    if (formatterPageUrl === void 0) { formatterPageUrl = defaultFormatterPage; }\r\n    layerList.on(\"load\", function (_a) {\r\n        var target = _a.target;\r\n        // Get the DOM node of the layer list\r\n        var node = target;\r\n        // Get the checkboxes for each layer.\r\n        var checkboxes = node.querySelectorAll(\".esriTitleContainer > input[type=checkbox]\");\r\n        // Setup an event to occur the first time layer's checkbox is clicked.\r\n        checkboxes.forEach(function (cb) {\r\n            cb.addEventListener(\"click\", function (ev) {\r\n                // \"this\" is the checkbox that was clicked.\r\n                if (!this.dataset.layerIndex) {\r\n                    return;\r\n                }\r\n                var layerIndex = parseInt(this.dataset.layerIndex, 10);\r\n                var opLayer = layerList.layers[layerIndex];\r\n                var tabContainer;\r\n                try {\r\n                    tabContainer = getTabContainerFromCheckbox(this);\r\n                }\r\n                catch (err) {\r\n                    // If its one of the sublayer checkboxes, a TypeError\r\n                    // with be thrown.\r\n                    // TODO: modify the querySelectorAll statement to be\r\n                    // more specific so that only the parent level checkboxes\r\n                    // are returned.\r\n                    if (!(err instanceof TypeError)) {\r\n                        throw err;\r\n                    }\r\n                }\r\n                if (tabContainer) {\r\n                    addMetadataTab(tabContainer, opLayer, layerIndex, formatterPageUrl);\r\n                }\r\n            }, {\r\n                once: true,\r\n                passive: true\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.addMetadataTabs = addMetadataTabs;\r\n/**\r\n * Gets the tab container for the layer corresponding to the given checkbox\r\n * @param checkbox A checkbox input element.\r\n */\r\nfunction getTabContainerFromCheckbox(checkbox) {\r\n    var tabContainer = checkbox.parentElement.parentElement\r\n        .nextElementSibling;\r\n    return tabContainer;\r\n}\r\n/**\r\n * Adds the metadata tab to a layer's tab container after checking to see\r\n * if the layer in question supports the LayerMetadata SOE.\r\n * @param tabContainer\r\n * @param operationalLayer\r\n * @param layerIndex\r\n * @param formatterPageUrl\r\n */\r\nfunction addMetadataTab(tabContainer, operationalLayer, layerIndex, formatterPageUrl) {\r\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n        var url, metadataSupported, mdLinks, tabId, listItem, tab, tabList, tabs, ul, name_1, mdUrl, a, li;\r\n        return tslib_1.__generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    // Exit early if there is no layer URL.\r\n                    if (!(operationalLayer && operationalLayer.layer && operationalLayer.layer.url)) {\r\n                        return [2 /*return*/];\r\n                    }\r\n                    url = operationalLayer.layer.url;\r\n                    return [4 /*yield*/, layer_metadata_soe_client_1.detectLayerMetadataSupport(url)];\r\n                case 1:\r\n                    metadataSupported = _a.sent();\r\n                    if (!metadataSupported) {\r\n                        return [2 /*return*/];\r\n                    }\r\n                    return [4 /*yield*/, layer_metadata_soe_client_1.getMetadataLinks(url)];\r\n                case 2:\r\n                    mdLinks = _a.sent();\r\n                    tabId = \"metadata\";\r\n                    listItem = document.createElement(\"li\");\r\n                    listItem.tabIndex = 0;\r\n                    listItem.dataset.tabId = tabId;\r\n                    listItem.dataset.layerIndex = layerIndex.toString(10);\r\n                    listItem.setAttribute(\"role\", \"tab\");\r\n                    listItem.classList.add(\"esriTabMenuItem\");\r\n                    listItem.textContent = \"Metadata\";\r\n                    tab = document.createElement(\"div\");\r\n                    tab.classList.add(\"esriTab\", \"metadata-panel\");\r\n                    tab.setAttribute(\"role\", \"tabpanel\");\r\n                    tab.dataset.tabId = tabId;\r\n                    tabList = tabContainer.firstElementChild;\r\n                    tabs = tabContainer.children[1];\r\n                    tabList.appendChild(listItem);\r\n                    tabs.appendChild(tab);\r\n                    ul = document.createElement(\"ul\");\r\n                    ul.classList.add(\"layer-metadata-list\");\r\n                    for (name_1 in mdLinks) {\r\n                        if (mdLinks.hasOwnProperty(name_1)) {\r\n                            mdUrl = mdLinks[name_1];\r\n                            a = document.createElement(\"a\");\r\n                            a.target = \"wsdot-metadata\";\r\n                            a.href = wrapUrlWithFormatterPage(mdUrl, formatterPageUrl);\r\n                            a.textContent = name_1;\r\n                            li = document.createElement(\"li\");\r\n                            li.appendChild(a);\r\n                            ul.appendChild(li);\r\n                        }\r\n                    }\r\n                    tab.appendChild(ul);\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\n","\"use strict\";\r\n/// <reference lib=\"dom\" />\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * @package @wsdot/layer-metadata-soe-client\r\n */\r\n/** @ignore */\r\nvar validLayersUrl = \"exts/LayerMetadata/validLayers?f=json\";\r\n/** @ignore */\r\nvar layerSourcesUrl = \"exts/LayerMetadata/layerSources?f=json\";\r\n/** @ignore */\r\nvar metadataUrl = \"exts/LayerMetadata/metadata\";\r\n/**\r\n * An error returned from an ArcGIS service.\r\n * @example\r\n * // Inside async function\r\n * const response = await fetch(\"https://www.example.com/ArcGIS/rest/services/MyService/query?invalidOption=thisisinvalid\");\r\n * const obj = await response.json();\r\n * if (obj.error) {\r\n *  throw new ArcGisError(obj.error);\r\n * }\r\n */\r\nvar ArcGisError = /** @class */ (function (_super) {\r\n    __extends(ArcGisError, _super);\r\n    /**\r\n     * Creates a new instance of ArcGisError.\r\n     * @param errorInfo - The \"error\" property of the response object returned from a failed ArcGIS Server request.\r\n     */\r\n    function ArcGisError(errorInfo) {\r\n        var _this = _super.call(this, errorInfo.message) || this;\r\n        _this.errorInfo = errorInfo;\r\n        _this.code = errorInfo.code;\r\n        return _this;\r\n    }\r\n    return ArcGisError;\r\n}(Error));\r\nexports.ArcGisError = ArcGisError;\r\n/**\r\n * Gets map service info\r\n * @param serviceUrl map service URL.\r\n * @throws {ArcGisError}\r\n */\r\nfunction getServiceInfo(serviceUrl) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var response, serviceInfo;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, fetch([serviceUrl, \"f=json\"].join(\"?\"))];\r\n                case 1:\r\n                    response = _a.sent();\r\n                    return [4 /*yield*/, response.json()];\r\n                case 2:\r\n                    serviceInfo = (_a.sent());\r\n                    if (serviceInfo.error) {\r\n                        throw new ArcGisError(serviceInfo.error);\r\n                    }\r\n                    return [2 /*return*/, serviceInfo];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.getServiceInfo = getServiceInfo;\r\n/**\r\n * Detects if a map service supports the \"LayerMetadata\" capability.\r\n * @param serviceUrl Map or Feature service URL.\r\n * @throws {ArcGisError}\r\n */\r\nfunction detectLayerMetadataSupport(serviceUrl) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var serviceInfo;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, getServiceInfo(serviceUrl)];\r\n                case 1:\r\n                    serviceInfo = _a.sent();\r\n                    if (!serviceInfo.supportedExtensions) {\r\n                        return [2 /*return*/, false];\r\n                    }\r\n                    return [2 /*return*/, /LayerMetadata/.test(serviceInfo.supportedExtensions)];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.detectLayerMetadataSupport = detectLayerMetadataSupport;\r\n/**\r\n * Gets a list of data sources\r\n * @param serviceUrl Map service URL\r\n * @returns An object keyed by data set names with values that are layer ID integers associated with those datasets.\r\n */\r\nfunction getLayerSources(serviceUrl) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var url, response, layerSources;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    url = [serviceUrl, layerSourcesUrl].join(\"/\");\r\n                    return [4 /*yield*/, fetch(url)];\r\n                case 1:\r\n                    response = _a.sent();\r\n                    return [4 /*yield*/, response.json()];\r\n                case 2:\r\n                    layerSources = (_a.sent());\r\n                    return [2 /*return*/, layerSources];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.getLayerSources = getLayerSources;\r\n/**\r\n * Gets URLs to unique metadata items.\r\n * @param url map service URL\r\n * @param layerSources If you have already called getLayerSources, you can pass in the results here to avoid making a duplicate request.\r\n * @returns Key value pairs. Keys are table names and values are metadata URLs.\r\n */\r\nfunction getMetadataLinks(url, layerSources) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var requestUrl, output, key;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!!layerSources) return [3 /*break*/, 2];\r\n                    return [4 /*yield*/, getLayerSources(url)];\r\n                case 1:\r\n                    layerSources = _a.sent();\r\n                    _a.label = 2;\r\n                case 2:\r\n                    requestUrl = [url, metadataUrl].join(\"/\");\r\n                    output = {};\r\n                    // tslint:disable-next-line:forin\r\n                    for (key in layerSources) {\r\n                        output[key] = [requestUrl, layerSources[key][0]].join(\"/\");\r\n                    }\r\n                    return [2 /*return*/, output];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.getMetadataLinks = getMetadataLinks;\r\n/**\r\n * Gets a list of valid layer IDs\r\n * @param url Map service URL\r\n * @throws {ArcGisError} Thrown if the map service returns an error.\r\n * @throws {TypeError} Thrown if HTTP request returns an object in unexpected format.\r\n */\r\nfunction getValidLayers(url) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var requestUrl, response, obj;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    requestUrl = [url, validLayersUrl].join(\"/\");\r\n                    return [4 /*yield*/, fetch(requestUrl)];\r\n                case 1:\r\n                    response = _a.sent();\r\n                    return [4 /*yield*/, response.json()];\r\n                case 2:\r\n                    obj = _a.sent();\r\n                    if (obj.layerIds) {\r\n                        return [2 /*return*/, obj.layerIds];\r\n                    }\r\n                    else if (obj.error) {\r\n                        throw new ArcGisError(obj.error);\r\n                    }\r\n                    else {\r\n                        throw new TypeError(\"response was not expected type: \" + JSON.stringify(obj));\r\n                    }\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.getValidLayers = getValidLayers;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar webMercatorUtils_1 = tslib_1.__importDefault(require(\"esri/geometry/webMercatorUtils\"));\r\nvar LayerSettings_1 = require(\"./LayerSettings\");\r\n/**\r\n * Updates the layers' settings to match those from URL search parameters.\r\n * @param search URL search string\r\n * @param opLayers Operational layers\r\n */\r\nfunction setOperationalLayers(search, layerList) {\r\n    var e_1, _a;\r\n    if (!search || !window.URLSearchParams) {\r\n        return;\r\n    }\r\n    var opLayers = layerList.layers;\r\n    try {\r\n        for (var opLayers_1 = tslib_1.__values(opLayers), opLayers_1_1 = opLayers_1.next(); !opLayers_1_1.done; opLayers_1_1 = opLayers_1.next()) {\r\n            var opLayer = opLayers_1_1.value;\r\n            // Skip if layer has no corresponding entry in URLSearchParams.\r\n            if (!opLayer.id || !search.has(opLayer.id)) {\r\n                continue;\r\n            }\r\n            var val = search.get(opLayer.id);\r\n            if (!val) {\r\n                // Skip if there is no value. (E.g., value is empty string.)\r\n                continue;\r\n            }\r\n            // parse string value into layer settings object.\r\n            var layerSettings = LayerSettings_1.LayerSettings.parse(val);\r\n            if (!layerSettings) {\r\n                // tslint:disable-next-line:no-console\r\n                console.warn(\"could not parse \\\"\" + val + \"\\\" into layer settings for layer \" + opLayer.id + \".\");\r\n                continue;\r\n            }\r\n            layerSettings.apply(opLayer);\r\n        }\r\n    }\r\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n    finally {\r\n        try {\r\n            if (opLayers_1_1 && !opLayers_1_1.done && (_a = opLayers_1.return)) _a.call(opLayers_1);\r\n        }\r\n        finally { if (e_1) throw e_1.error; }\r\n    }\r\n}\r\nexports.setOperationalLayers = setOperationalLayers;\r\n/**\r\n * Creates a link on the map that will, when clicked, copy the URL of the page with\r\n * URL search parameters\r\n * @param layerList\r\n */\r\nfunction createLayerLink(layerList) {\r\n    var urlSupported = window.URL && window.URLSearchParams && window.history;\r\n    if (!urlSupported) {\r\n        throw new Error(\"Browser must support all of the following features: URL, URLSearchParams, history.\");\r\n    }\r\n    var div = document.createElement(\"div\");\r\n    div.classList.add(\"layer-link\");\r\n    var a = document.createElement(\"a\");\r\n    a.href = new URL(location.href, location.href.replace(/\\?.+$/, \"\")).toString();\r\n    a.textContent = \"\";\r\n    a.title = \"copy URL with layer settings to clipboard\";\r\n    a.target = \"_blank\";\r\n    a.classList.add(\"layer-link__anchor\");\r\n    var copiedClass = \"layer-link--copied\";\r\n    var disabledClass = \"layer-link--disabled\";\r\n    div.classList.add(disabledClass);\r\n    div.appendChild(a);\r\n    layerList.map.on(\"extent-change\", function (_a) {\r\n        var extent = _a.extent;\r\n        extent = webMercatorUtils_1.default.webMercatorToGeographic(extent);\r\n        var xmin = extent.xmin, ymin = extent.ymin, xmax = extent.xmax, ymax = extent.ymax;\r\n        var searchValue = [xmin, ymin, xmax, ymax]\r\n            .map(function (n) {\r\n            return Math.round(n * 10000) / 10000;\r\n        })\r\n            .join(\" \");\r\n        var url = new URL(a.href);\r\n        url.searchParams.set(\"map-extent\", searchValue);\r\n        a.href = url.toString();\r\n        div.classList.remove(disabledClass);\r\n        div.classList.remove(copiedClass);\r\n    });\r\n    layerList.on(\"toggle\", function (toggleEvent) {\r\n        // Enable and turn off copied status.\r\n        div.classList.remove(copiedClass);\r\n        div.classList.remove(disabledClass);\r\n        var layerIndex = toggleEvent.layerIndex, visible = toggleEvent.visible, subLayerIndex = toggleEvent.subLayerIndex;\r\n        // Get the operational layer from the layer list based on the event's layerIndex.\r\n        var operationalLayer = layerList.layers[layerIndex];\r\n        // Get the URL currently in the link's href attribute.\r\n        // Store in URL object so that search params can be\r\n        // easily searched and manipulated.\r\n        var url = new URL(a.href);\r\n        // Retrieve the current settings store in the URL for this layer.\r\n        // If there are no settings, the old settings variable will be null.\r\n        var oldSettingStr = url.searchParams.get(operationalLayer.id);\r\n        var oldSettings = oldSettingStr\r\n            ? LayerSettings_1.LayerSettings.parse(oldSettingStr)\r\n            : null;\r\n        // Detect if the settings for this layer had sublayers specified.\r\n        var hadSublayersDefined = oldSettings\r\n            ? oldSettings.visibleLayers != null\r\n            : false;\r\n        // Initialize layer settings object.\r\n        var layerSettings;\r\n        // Layer settings string for the URL will simply indicate if\r\n        // the parent layer is on or off except under these conditions:\r\n        // * Ability to change sublayer visibility is enabled for current layer.\r\n        // * User changed visibility of sublayer via UI or sublayer visibility\r\n        //   had been previously set in the URL.\r\n        if (operationalLayer.showSubLayers &&\r\n            (hadSublayersDefined || subLayerIndex != null)) {\r\n            layerSettings = new LayerSettings_1.LayerSettings(operationalLayer.layer);\r\n        }\r\n        else {\r\n            layerSettings = new LayerSettings_1.LayerSettings({ visible: visible });\r\n        }\r\n        // Update the URL search parameter for this layer and assign updated URL to link's href.\r\n        url.searchParams.set(operationalLayer.id, layerSettings.toString());\r\n        a.href = url.toString();\r\n    });\r\n    // Setup link click event. When link is clicked\r\n    a.onclick = function (e) {\r\n        var unsupportedMessage = \"Could not copy to clipboard. Right-click link and use context menu to copy link.\";\r\n        var clipboard = navigator.clipboard;\r\n        // If browser doesn't support clipboard, show an alert.\r\n        if (!(clipboard && clipboard.writeText)) {\r\n            alert(unsupportedMessage);\r\n            return false;\r\n        }\r\n        // Copy link's href value to clipboard.\r\n        // If successful, add a class for CSS to style to indicate success.\r\n        // If copy fails, show an alert.\r\n        clipboard.writeText(a.href).then(function () {\r\n            div.classList.add(copiedClass);\r\n        }, function (clipErr) {\r\n            alert(unsupportedMessage);\r\n        });\r\n        return false;\r\n    };\r\n    var mapRoot = layerList.map.root;\r\n    mapRoot.appendChild(div);\r\n}\r\nexports.createLayerLink = createLayerLink;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__11__;","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar reUtils_1 = require(\"./reUtils\");\r\n/**\r\n * Stores settings for individual layers.\r\n */\r\nvar LayerSettings = /** @class */ (function () {\r\n    /**\r\n     * Creates a new instance\r\n     * @param options An object that implements ILayerSettings.\r\n     */\r\n    function LayerSettings(options) {\r\n        if (options) {\r\n            this.visible = options.visible;\r\n            this.visibleLayers = options.visibleLayers;\r\n        }\r\n    }\r\n    /**\r\n     * Converts a string from a URLSearchParams value into a LayerSettings.\r\n     * @param str a value from a URLSearchParams.\r\n     */\r\n    LayerSettings.parse = function (str) {\r\n        var trueRe = reUtils_1.makeBooleanRe(true, true);\r\n        var falseRe = reUtils_1.makeBooleanRe(false, true);\r\n        var sublayersRe = /^\\d+(?:[\\s,]\\d+)*$/;\r\n        var visible = trueRe.test(str)\r\n            ? true\r\n            : falseRe.test(str)\r\n                ? false\r\n                : undefined;\r\n        var visibleLayers;\r\n        if (visible === undefined && sublayersRe.test(str)) {\r\n            visibleLayers = str.split(/\\D+/).map(function (s) { return parseInt(s, 10); });\r\n            visible = true;\r\n        }\r\n        if (visible === null) {\r\n            return null;\r\n        }\r\n        return new LayerSettings({\r\n            visible: visible,\r\n            visibleLayers: visibleLayers\r\n        });\r\n    };\r\n    /**\r\n     * Applies the settings to an operational layer.\r\n     * @param operationalLayer An operational layer from a layer list.\r\n     */\r\n    LayerSettings.prototype.apply = function (operationalLayer) {\r\n        var layer = operationalLayer.layer;\r\n        if (!layer) {\r\n            return;\r\n        }\r\n        var refreshAbleLayer = layer;\r\n        if (refreshAbleLayer.suspend) {\r\n            refreshAbleLayer.suspend();\r\n        }\r\n        if (this.visible != null) {\r\n            operationalLayer.visibility = this.visible;\r\n            layer.setVisibility(this.visible);\r\n        }\r\n        if (operationalLayer.showSubLayers && this.visibleLayers) {\r\n            layer.setVisibleLayers(this.visibleLayers);\r\n        }\r\n        if (refreshAbleLayer.resume) {\r\n            refreshAbleLayer.resume();\r\n        }\r\n    };\r\n    /**\r\n     * Converts to string for use with URLSearchParams\r\n     */\r\n    LayerSettings.prototype.toString = function () {\r\n        if (this.visible == null) {\r\n            return \"\";\r\n        }\r\n        if (!this.visible) {\r\n            return \"\";\r\n        }\r\n        if (this.visibleLayers) {\r\n            return this.visibleLayers.join(\" \");\r\n        }\r\n        return \"\";\r\n    };\r\n    return LayerSettings;\r\n}());\r\nexports.LayerSettings = LayerSettings;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar trueStrings = [\"true\", \"on\", \"\", \"\", \"\", \"\", \"\", \"\"];\r\nvar falseStrings = [\"false\", \"off\", \"\", \"X\"];\r\n/**\r\n * Creates a regular expression that will match if tested against a string\r\n * containing any of the strings in the input array.\r\n * @param strings An array of strings\r\n * @param exclusive Set to true to start regex with \"^\" and end with \"$\", false (or omit) otherwise.\r\n * @example\r\n * const trueStrings = [\"true\", \"on\", \"1\", \"\", \"\", \"\", \"\", \"\", \"\"];\r\n * const falseStrings = [\"false\", \"off\", \"0\", \"\", \"X\"];\r\n * const trueRe = makeReGroup(trueStrings);\r\n * // /(?:true)|(?:on)|(?:1)|(?:)|(?:)|(?:)|(?:)|(?:)|(?:)/\r\n * const falseRe = makeReGroup(falseStrings);\r\n * // /(?:false)|(?:off)|(?:0)|(?:)|(?:X)/\r\n */\r\nfunction makeReGroup(strings, exclusive) {\r\n    var pattern = strings.map(function (s) { return \"(?:\" + s + \")\"; }).join(\"|\");\r\n    if (exclusive) {\r\n        pattern = \"^(?:\" + pattern + \")$\";\r\n    }\r\n    return new RegExp(\"\" + pattern, \"i\");\r\n}\r\nexports.makeReGroup = makeReGroup;\r\n/**\r\n * Creates a RegExp that will match boolean values.\r\n * @param matchOnly Set to true to only match true value strings.\r\n * Set to false to only match false value strings.\r\n * Set to non-boolean (e.g., undefined or null) to match either true or false.\r\n * @param exclusive\r\n */\r\nfunction makeBooleanRe(matchOnly, exclusive) {\r\n    var parts = matchOnly === true\r\n        ? trueStrings\r\n        : matchOnly === false\r\n            ? falseStrings\r\n            : trueStrings.concat.apply(trueStrings, tslib_1.__spread(falseStrings));\r\n    return makeReGroup(parts, exclusive);\r\n}\r\nexports.makeBooleanRe = makeBooleanRe;\r\n","/**\r\n * An error to be used when a string is not in the format that was expected.\r\n */\r\nexport class FormatError extends Error {\r\n  /**\r\n   * Creates a new instance\r\n   * @param value The string that generated the error.\r\n   * @param expectedFormat The format that was expected.\r\n   */\r\n  constructor(value: string, expectedFormat: RegExp) {\r\n    super(`\"${value}\" does not match expected format: \"${expectedFormat}\".`);\r\n  }\r\n}\r\n","import { FormatError } from \"./FormatError\";\r\n\r\n/**\r\n * Gets the Github.com URL for a URL of a page published via Github Pages.\r\n * @param url Github Pages URL. If omitted, location.href will be used.\r\n * @throws {FormatError}\r\n */\r\nexport function ghPagesToGithubUrl(url: string = location.href) {\r\n  const re = /https?\\:\\/\\/([^\\.]+)\\.github.io\\/([^\\/]+)/i;\r\n  const match = url.match(re);\r\n  if (!match) {\r\n    throw new FormatError(url, re);\r\n  }\r\n\r\n  const [, owner, project] = match;\r\n  return `https://www.github.com/${owner}/${project}`;\r\n}\r\n\r\n/**\r\n * Converts a GitHub repository page URL into a Github Pages URL.\r\n * (Does not check to see if URL actually exists.)\r\n * @param url Github repository URL. If omitted, location.href will be used.\r\n * @throws {FormatError}\r\n */\r\nexport function githubToGHPagesUrl(url: string = location.href) {\r\n  const re = /https?\\:\\/\\/www.github.com\\/([^\\/]+)\\/([^\\/]+)/;\r\n  const match = url.match(re);\r\n  if (!match) {\r\n    throw new FormatError(url, re);\r\n  }\r\n\r\n  const [, owner, project] = match;\r\n  return `https://${owner}.github.io/${project}`;\r\n}\r\n\r\n/**\r\n * Creates a link to the source code on Github for a Github Pages page.\r\n * (Does not check to see if URL actually exists.)\r\n * @param url Github repository URL. If omitted and page is hosted on Github Pages, the GitHub project URL will be automatically detected.\r\n * @returns An anchor (a) element that will link to a GitHub project. The anchor element will be labelled with a span element.\r\n * The anchor has the class \"github-link\" and the child span will have the class \"github-link__label\" (following BEM convention).\r\n */\r\nexport function createSourceLink(url?: string) {\r\n  url = url || ghPagesToGithubUrl();\r\n\r\n  const a = document.createElement(\"a\");\r\n  a.href = url;\r\n  a.target = \"_blank\";\r\n  a.rel = \"nofollow\";\r\n\r\n  const span = document.createElement(\"span\");\r\n  span.textContent = \"Source on GitHub\";\r\n\r\n  a.classList.add(\"github-link\");\r\n  span.classList.add(\"github-link__label\");\r\n\r\n  a.appendChild(span);\r\n\r\n  return a;\r\n}\r\n","import Portal from \"esri/arcgis/Portal\";\r\n\r\nconst wsdotAgolOrgId = \"IYrj3otxNjPsrTRD\";\r\n\r\n/**\r\n * Queries ArcGIS online for WSDOT webmaps.\r\n */\r\nasync function getWebMaps() {\r\n  const portal = new Portal.Portal(\"https://www.arcgis.com\");\r\n  const queryResults = await portal.queryItems({\r\n    num: 100,\r\n    q: `orgid:${wsdotAgolOrgId} AND type:(\"Web Map\" NOT \"Application\") AND tags:\"geoportal\"`\r\n  });\r\n  const { results } = queryResults as Portal.PortalQueryResult;\r\n  return results as Portal.PortalItem[];\r\n}\r\n\r\n/**\r\n * Creates a form from which a user can reload the application with a different webmap.\r\n */\r\nexport function createWebmapIdForm() {\r\n  const queryPomise = getWebMaps();\r\n\r\n  const form = document.createElement(\"form\");\r\n  form.action = \".\";\r\n  form.classList.add(\"webmapForm\");\r\n\r\n  const input = document.createElement(\"input\");\r\n  input.name = \"webmap\";\r\n  input.id = \"webmapInput\";\r\n  input.type = \"text\";\r\n  input.required = true;\r\n  input.placeholder = \"ArcGIS webmap id\";\r\n  input.title = \"value must be hexadecimal webmap ID\";\r\n  input.pattern = /^[a-f0-9]+$/.source;\r\n\r\n  const datalist = document.createElement(\"datalist\");\r\n  datalist.id = \"webmapList\";\r\n\r\n  input.setAttribute(\"list\", datalist.id);\r\n\r\n  const button = document.createElement(\"button\");\r\n  button.type = \"submit\";\r\n  button.textContent = \"change map\";\r\n\r\n  form.appendChild(input);\r\n  form.appendChild(datalist);\r\n  form.appendChild(button);\r\n\r\n  queryPomise.then(\r\n    results => {\r\n      results.forEach(pi => {\r\n        const option = document.createElement(\"option\");\r\n        option.textContent = option.value = pi.id;\r\n        option.label = pi.title;\r\n        datalist.appendChild(option);\r\n      });\r\n    },\r\n    error => {\r\n      console.error(\"AGOL query error\", error);\r\n      const customEvent = new CustomEvent(\"webmapqueryerror\", {\r\n        detail: { error }\r\n      });\r\n      form.dispatchEvent(customEvent);\r\n    }\r\n  );\r\n\r\n  return form;\r\n}\r\n","import GroupedLayerList, {\r\n  convertLayer,\r\n  createLayerLink,\r\n  CreateMapEvent,\r\n  getGroupsFromCreateMapItem,\r\n  setOperationalLayers\r\n} from \"@wsdot/grouped-layer-list\";\r\nimport arcgisUtils from \"esri/arcgis/utils\";\r\nimport esriConfig from \"esri/config\";\r\nimport HomeButton from \"esri/dijit/HomeButton\";\r\nimport Extent from \"esri/geometry/Extent\";\r\nimport { FormatError } from \"./FormatError\";\r\nimport { createSourceLink } from \"./GithubLink\";\r\nimport { createWebmapIdForm } from \"./WebmapSelector\";\r\n\r\nesriConfig.defaults.io.httpsDomains.push(\"wsdot.wa.gov\");\r\nesriConfig.defaults.io.corsEnabledServers.push(\r\n  \"wsdot.wa.gov\",\r\n  \"data.wsdot.wa.gov\"\r\n);\r\n\r\nconst mapInput = createWebmapIdForm();\r\n\r\n/**\r\n * Gets the map ID from URL search parameter. Returns a default value\r\n * if there is no webmap URL search parameter.\r\n */\r\nfunction getMapIDFromUrl() {\r\n  const defaultMapId = \"d2666674071e4263ac344046f09b7599\";\r\n  const re = /\\bwebmap=([a-f0-9]+)\\b/i;\r\n  const match = location.search ? location.search.match(re) : null;\r\n  if (!match) {\r\n    return defaultMapId;\r\n  }\r\n  // groupings = {};\r\n  return match[1];\r\n}\r\n\r\n/**\r\n * Gets extent from URL if one is defined there.\r\n */\r\nfunction getExtentFromUrl() {\r\n  const url = new URL(location.href);\r\n  const extStr = url.searchParams.get(\"map-extent\");\r\n  if (!extStr) {\r\n    return undefined;\r\n  }\r\n\r\n  const [xmin, ymin, xmax, ymax] = extStr\r\n    .split(/[\\s,]/g)\r\n    .map(s => parseFloat(s));\r\n\r\n  const extent = new Extent({\r\n    xmin,\r\n    ymin,\r\n    xmax,\r\n    ymax,\r\n    spatialReference: { wkid: 4326 }\r\n  });\r\n  return extent;\r\n}\r\n\r\n// Set default map ID.\r\n// Override default map ID if one is defined in URL search params.\r\nconst mapId = getMapIDFromUrl();\r\n\r\n// Create the map using AGOL webmap.\r\narcgisUtils\r\n  .createMap(mapId, \"map\", {\r\n    mapOptions: {\r\n      extent: getExtentFromUrl() || undefined\r\n    }\r\n  })\r\n  .then((evt: CreateMapEvent) => {\r\n    const { map, itemInfo, errors } = evt;\r\n\r\n    const mapButtonDiv = document.createElement(\"button\");\r\n    mapButtonDiv.id = \"homeButton\";\r\n    map.root.appendChild(mapButtonDiv);\r\n\r\n    const homeButton = new HomeButton(\r\n      {\r\n        visible: true,\r\n        map\r\n      },\r\n      mapButtonDiv\r\n    );\r\n    homeButton.startup();\r\n\r\n    map.root.appendChild(mapInput);\r\n\r\n    // get the groupings defined in ArcGIS Online webmap item.\r\n    const groupings = getGroupsFromCreateMapItem(itemInfo) || undefined;\r\n\r\n    // If there were errors creating the map, write them to the console.\r\n    if (errors && errors.length > 0) {\r\n      console.group(\"create map error\");\r\n      errors.forEach(e => console.error(e));\r\n      console.groupEnd();\r\n    }\r\n\r\n    // Convert operational layers from the format returned by the createMap function\r\n    // To the format needed by the LayerList constructor.\r\n    // const layers = arcgisUtils.getLayerList(evt) as LayerListOperationalLayer[];\r\n    const layers = itemInfo.itemData.operationalLayers.map(convertLayer);\r\n\r\n    // Create the layer list.\r\n    const layerList = new GroupedLayerList(\r\n      {\r\n        groups: groupings,\r\n        groupProperty: \"title\",\r\n        map,\r\n        metadata: true,\r\n        layers,\r\n        throwOnGroupNotFound: false\r\n      },\r\n      \"layerList\"\r\n    );\r\n\r\n    createLayerLink(layerList);\r\n\r\n    const urlSupported = window.URL && window.URLSearchParams && window.history;\r\n\r\n    if (urlSupported) {\r\n      layerList.on(\"load\", () => {\r\n        const url = new URL(location.href);\r\n        const { searchParams } = url;\r\n        if (searchParams) {\r\n          setOperationalLayers(searchParams, layerList);\r\n        }\r\n      });\r\n    }\r\n\r\n    layerList.startup();\r\n\r\n    try {\r\n      const sourceLink = createSourceLink(\r\n        \"https://www.github.com/wsdot-gis/grouped-layer-list\"\r\n      );\r\n      map.root.appendChild(sourceLink);\r\n    } catch (err) {\r\n      if (!(err instanceof FormatError)) {\r\n        throw err;\r\n      }\r\n    }\r\n  })\r\n  // Handle errors from CreateMap function.\r\n  .catch((err: Error) => {\r\n    console.error(\"map creation error\", err);\r\n  });\r\n"],"sourceRoot":""}